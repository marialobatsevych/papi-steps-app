# Система Фонов в Papi Steps 🏠

## Текущая Реализация (v2.2)

### Дефолтный Фон - Уютная Комната

**Изображение:** `figma:asset/ac07d83922ffd5b6c2d62affefe76615b484d899.png`

**Описание:**
- 🏠 Уютная пастельная комната
- 🪟 Большое окно с видом на природу
- 🌿 Растения в горшках (фикус, монстера, висячие растения)
- 🛋️ Розовый диван справа
- 📚 Полки с декором слева
- 🎨 Картины на стенах
- ☁️ Облака в небе за окном
- 🌤️ Дневное освещение

**Цветовая палитра:**
- Стены: Нежно-персиковый (#FFD6B8)
- Пол: Светло-бежевый (#F5E6D3)
- Окно: Голубое небо (#A8D8FF)
- Акценты: Розовый, лавандовый, мятный

### Технические Детали

#### Импорт
```tsx
import defaultRoomBackground from 'figma:asset/ac07d83922ffd5b6c2d62affefe76615b484d899.png';
```

#### Применение
```tsx
<div 
  className="absolute inset-0 bg-cover bg-center bg-no-repeat"
  style={{
    backgroundImage: `url(${defaultRoomBackground})`,
    backgroundSize: 'cover',
    backgroundPosition: 'center'
  }}
/>
```

#### Оверлей для Контраста
```tsx
<div className="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/20" />
```

Градиент создает:
- Затемнение внизу для лучшей читаемости белого текста
- Плавный переход от фона к UI элементам
- Глубину и атмосферу

### Композиция Экрана

```
┌──────────────────────────────────┐
│  Полупрозрачная панель (10%)     │
├──────────────────────────────────┤
│                                  │
│     🪟 ОКНО С НЕБОМ              │
│                                  │
│  🌿 РАСТЕНИЯ  ║  🛋️ ДИВАН       │
│                                  │  70%
│     📚 ПОЛКИ   ║   КАРТИНЫ       │  Фона
│                                  │
│        ☁️ ОБЛАКА                 │
│                                  │
├──────────────────────────────────┤
│  🐕 Papi + Управление (20%)      │
└──────────────────────────────────┘
```

### Видимость Фона

**До v2.2:**
- Градиент занимал весь экран
- Персонаж в центре
- Фон был вторичным элементом

**После v2.2:**
- **70% экрана** показывает комнату полностью
- Персонаж внизу (не закрывает фон)
- Фон - главная визуальная фишка

### Преимущества Текущего Дизайна

1. **Погружение**
   - Пользователь чувствует себя "в комнате"
   - Атмосфера уюта и комфорта
   - Эмоциональная связь с пространством

2. **Эргономика**
   - Все кнопки внизу экрана
   - Удобно держать телефон одной рукой
   - Большой палец легко достает до всех элементов

3. **Визуальная Иерархия**
   - Фон: Главный элемент (70%)
   - Персонаж: Второстепенный (20%)
   - UI: Минималистичный (10%)

---

## Будущие Фоны (Планируется)

### Категории в Магазине

#### 🏖️ Природа
- Пляж с пальмами
- Лесная поляна
- Горный пейзаж
- Водопад

#### 🏙️ Городские
- Современная квартира
- Кафе с видом на город
- Парк в центре города
- Библиотека

#### 🌌 Фантастические
- Космическая станция
- Облачный замок
- Подводный мир
- Волшебный лес

#### 🎄 Сезонные
- Зимняя комната с елкой
- Осенний сад
- Весенний балкон
- Летняя терраса

#### 🎨 Премиум
- Анимированные фоны (день/ночь цикл)
- Интерактивные элементы (птицы, бабочки)
- Погодные эффекты (дождь, снег)
- Кастомные фоны (загрузка своих)

### Система Покупки

```tsx
interface Background {
  id: string;
  name: string;
  category: 'nature' | 'urban' | 'fantasy' | 'seasonal' | 'premium';
  price: number;
  image: string;
  animated?: boolean;
  interactive?: boolean;
  description: string;
  unlocked: boolean;
}
```

#### Пример Фона
```tsx
{
  id: 'beach-sunset',
  name: 'Закат на Пляже',
  category: 'nature',
  price: 500,
  image: 'path/to/beach.png',
  animated: true,
  description: 'Уютный пляж с розовым закатом и пальмами',
  unlocked: false
}
```

### Механика Применения

1. **Выбор в Магазине**
   - Пользователь видит превью фона
   - Может купить за монеты лапок (💰)
   - После покупки фон разблокируется

2. **Применение Фона**
   - Открыть настройки
   - Выбрать "Фоны"
   - Нажать на понравившийся
   - Фон применяется мгновенно

3. **Сохранение**
   - Выбранный фон сохраняется в localStorage
   - Загружается при следующем запуске
   - Можно менять в любое время

### Технические Требования

#### Размер Изображений
- **Формат:** PNG или WebP
- **Разрешение:** 430x932px (iPhone 14 Pro Max)
- **Размер файла:** < 500KB
- **Оптимизация:** Сжатие без потери качества

#### Цветовая Палитра
Фоны должны гармонировать с kawaii стилем:
- Пастельные тона
- Мягкие цвета
- Избегать ярких неоновых цветов
- Комплиментарные с UI элементами

#### Композиция
- Центр должен быть относительно свободным для персонажа
- Детали по краям (верх и бока)
- Низ может быть более детализирован (персонаж там маленький)

---

## Анимированные Фоны (Будущее)

### День/Ночь Цикл

**Механика:**
- Фон меняется в зависимости от времени суток
- 06:00-18:00: Дневной вариант
- 18:00-06:00: Ночной вариант
- Плавный переход за 30 секунд

**Пример:**
```tsx
const getCurrentBackground = (time: Date, backgroundId: string) => {
  const hour = time.getHours();
  const isDay = hour >= 6 && hour < 18;
  
  return isDay 
    ? `${backgroundId}-day.png`
    : `${backgroundId}-night.png`;
};
```

### Интерактивные Элементы

**Примеры:**
- 🦋 Бабочки летают при касании
- ☁️ Облака двигаются медленно
- 🌸 Цветы качаются от ветра
- 🐦 Птицы прилетают периодически

**Реализация:**
```tsx
<div className="absolute top-20 left-10 animate-float">
  <span className="text-2xl">🦋</span>
</div>
```

### Погодные Эффекты

**Типы:**
- ☀️ Солнечно (по умолчанию)
- ⛅ Облачно
- 🌧️ Дождь
- ❄️ Снег
- 🌈 Радуга (после дождя)

---

## Лучшие Практики

### Дизайн Фонов

1. **Баланс Детализации**
   - Достаточно деталей для интереса
   - Не перегружать (отвлекает от персонажа)
   - Фокус на атмосфере, не на объектах

2. **Читаемость UI**
   - Фон не должен мешать читать текст
   - Используйте мягкие цвета
   - Избегайте контрастных паттернов в местах UI

3. **Эмоциональный Отклик**
   - Каждый фон должен вызывать эмоцию
   - Уют, спокойствие, радость
   - Соответствие wellness теме

### Тестирование

- ✅ Проверить на разных размерах экрана
- ✅ Убедиться, что UI элементы видны
- ✅ Протестировать с разными состояниями Papi
- ✅ Проверить производительность (FPS)

---

**Последнее обновление:** 13 октября 2025  
**Версия системы фонов:** 1.0  
**Статус:** ✅ Дефолтный фон внедрен, система готова к расширению
